<html>
<head>
    <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet-src.js"></script>
    <script src="https://d3js.org/d3-hexbin.v0.2.min.js"></script>
    <script src="https://rawgit.com/Asymmetrik/leaflet-d3/master/dist/leaflet-d3.js" charset="utf-8"></script>
    <style>
        .hexbin-hexagon {
            stroke: #000;
            stroke-width: 1px;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css">

</head>
<body>

<div id="map" style="width: 100%; height: 100%; border: 1px solid #ccc"></div>
<button onclick="generateData()">Generate Data</button>
</body>
<script>
    var center = [1.3521, 103.8198];

    var osmUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        osm = L.tileLayer(osmUrl, {maxZoom: 18, attribution: osmAttrib});
    map = new L.Map('map', {
        layers: [osm],
        center: new L.LatLng(center[0], center[1]),
        zoom: 12,
        maxBoundsViscosity: 1.0
    });
    var southWest = L.latLng(-89.98155760646617, -180),
        northEast = L.latLng(89.99346179538875, 180);
    var bounds = L.latLngBounds(southWest, northEast);

    map.setMaxBounds(bounds);
    var options = {
        radius : 12,
        opacity: 0.5,
        duration: 500
    };
    var hexLayer = L.hexbinLayer(options).addTo(map)
    hexLayer.colorScale().range(['white', 'blue']);

    hexLayer
        .radiusRange([6, 11])
        .lng(function(d) { return d[0]; })
        .lat(function(d) { return d[1]; })
        .colorValue(function(d) { return d.length; })
        .radiusValue(function(d) { return d.length; });

    var latFn = d3.randomNormal(center[0], 1);
    var longFn = d3.randomNormal(center[1], 1);

    var generateData = function(){
        var data = [];
        for(i=0; i<1000; i++){
            data.push(1.3521,103.8198)
        }
        hexLayer.data(data);
    };
generateData();

</script>
</html>